<!doctype html>
<html lang="en" class="light">

<head>
    {% include "head.njk" %}
</head>

<body
    class="min-h-screen bg-gradient-to-b from-white to-emerald-50 dark:from-slate-900 dark:to-slate-800 text-slate-800 dark:text-slate-100">
    <!-- NAV -->
    {% include "header.njk" %}

    {{ content | safe }}

    <footer class="mt-2 py-4 border-t border-white/5">
        <div class="max-w-6xl mx-auto px-6 text-sm text-slate-500">© <span id="year"></span> {{ globalConfig.author }}. All rights reserved.</div>
    </footer>

    <script>
        // small utilities: theme toggle + reveals + contact copy
        document.getElementById('year').textContent = new Date().getFullYear();

        // theme toggle (persist)
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const stored = localStorage.getItem('theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        function applyTheme(t) {
            if (t === 'dark') {
                document.documentElement.classList.add('dark');
                themeIcon.innerHTML = '<path d=\"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z\"/>';
            } else {
                document.documentElement.classList.remove('dark');
                themeIcon.innerHTML = '<path d=\"M12 3v1M12 20v1M4.2 4.2l.7.7M18.1 18.1l.7.7M1 12h1M22 12h1M4.2 19.8l.7-.7M18.1 5.9l.7-.7M12 6a6 6 0 100 12 6 6 0 000-12z\"/>';
            }
        }
        applyTheme(stored);
        themeToggle.addEventListener('click', () => {
            const next = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
            localStorage.setItem('theme', next);
            applyTheme(next);
        });

        // reveal on scroll
        const ro = new IntersectionObserver((entries) => {
            entries.forEach(en => {
                if (en.isIntersecting) en.target.classList.add('visible');
            });
        }, { threshold: 0.12 });
        document.querySelectorAll('.reveal').forEach(el => ro.observe(el));

        // Hide Navber when scrolling down
        let prevScrollPos = window.pageYOffset;
        window.onscroll = function () {
            const currentScrollPos = window.pageYOffset;
            const navbar = document.getElementById("navbar");
            if (prevScrollPos > currentScrollPos) {
                // scrolling up → show navbar
                navbar.classList.remove("opacity-0", "invisible");
    navbar.classList.add("opacity-100", "visible");
            } else {
                // scrolling down → hide navbar
                navbar.classList.remove("opacity-100", "visible");
    navbar.classList.add("opacity-0", "invisible");
            }
            prevScrollPos = currentScrollPos;
        };
    </script>
</body>

</html>